{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/jayxin/Desktop/pro/final2/pages/game_local/game_local.vue?3cfc","webpack:///C:/Users/jayxin/Desktop/pro/final2/pages/game_local/game_local.vue?1de1","webpack:///C:/Users/jayxin/Desktop/pro/final2/pages/game_local/game_local.vue?151f","webpack:///C:/Users/jayxin/Desktop/pro/final2/pages/game_local/game_local.vue?845c","uni-app:///pages/game_local/game_local.vue","webpack:///C:/Users/jayxin/Desktop/pro/final2/pages/game_local/game_local.vue?1ad6","webpack:///C:/Users/jayxin/Desktop/pro/final2/pages/game_local/game_local.vue?79d6"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","Dice","onLoad","data","numList","currentRound","currentPlayer","player1Score","player2Score","player1DiceValues","player2DiceValues","player1LockedDices","player2LockedDices","showMultiplierDialog","player1Multiplier","totalMultiplier","player2Multiplier","currentBureauNum","bureauNum","isFlag","player1Multiplying","methods","rollDices","confirmLock","setMultiplier","calculateScore","diceValues","finalizeScores","updateLockStatus","updateDiceValue","navigateBack","uni","setMultiplierForComputer","title","setTimeout","getDiceTypeAndScore","console","acc","icon","duration","judgeType","duplicatedElements","setForEach","setArr","score","resetDice","hideButton"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,mBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuH;AACvH;AAC8D;AACL;AACa;;;AAGtE;AAC+K;AAC/K,gBAAgB,wLAAU;AAC1B,EAAE,gFAAM;AACR,EAAE,qFAAM;AACR,EAAE,8FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,yFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,+JAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjCA;AAAA;AAAA;AAAA;AAAspB,CAAgB,2qBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCuD1qB;EACAC;IACAC;EACA;EACAC;IACA;MACA;IACA;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;;EACAC;IACAC;MAAA;MACA;QACA;QACA;QACA;UACA,4EACA;QACA;QACA;UACA;QACA;MACA;QACA;UACA,4EACA;QACA;QACA;UACA;UACA;UACA;UACA;QACA;MACA;IACA;IAEAC;MACA;MACA;MACA;IACA;IAEAC;MAEA;QACA;UACA;UACA;YACA;UACA;QACA;MAEA;MAEA;QACA;MACA;QACA;QACA;QAEA;MACA;MAEA;;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;MACA;MACAC;QAAA;MAAA;MAEA;QAAA;MAAA;MACA;QAAA;MAAA;MACA;QAAA;MAAA;MACA;QAAA;MAAA;MAEA;QAAA;MAAA;MACA;QAAA;MAAA;MACA;QAAA;MAAA;MAEA;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;MAEA;IACA;IAEAC;MACA;MAEA;QACA;QACA;MACA;QACA;QACA;MACA;IACA;IACAC;MACA;QACA;MACA;QACA;MACA;IACA;IAEAC;MACA;QACA;MACA;QACA;MACA;IACA;IACAC;MACAC;IACA;IACA;IACAC;MAAA;MACA;MACA;MACAD;QACAE;MACA;MACAC;QACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IAEA;IACAC;MAAA;MACAC;MACA;MACA;QACA;UACAC;QACA;UACAA;QACA;QACA;MACA;MACA;QACA;QACA;MACA;QACA;QACA;MACA;MACA;;MAEA;QACAH;UACAH;UACAA;YACAE;YACAK;UACA;UACA;QACA;QACA;MACA;MACA;QACAP;QACAA;UACAE;UACAK;UACAC;QACA;QACA;QACA;MACA;MACA;MACA;MACA;MACA;MACAR;MACA;IACA;IAEA;IACAS;MACA;MACA;MACA;MACA;QACA;UACA;UACAC;UACAA;UACAA;UACA;QACA;UACAA;UACA;QACA;UACAA;UACA;QACA;UACAA;UACAA;YAAA;UAAA;UACA;QACA;UACA;UACA;YACAA;YACAA;cAAA;YAAA,QACA;UACA;YACA;YACAA;YACAA;cAAA;YAAA,QACA;UACA;YACAA;YACAA;cAAA;YAAA;UACA;UACA;MAAA;MAGA;IAEA;IACA;IACAC;MACA;MACA;MAAA,2CACAC;QAAA;MAAA;QAAA;UAAA;UACA;YAAA;UAAA;UACA;YACAC;UACA;;UAEA;UACA;YACA;cACAH;YACA;cACAA;YACA;UACA;YACA;cACAA;YACA;cACAA;YACA;UACA;QAAA;QAnBA;UAAA;QAoBA;MAAA;QAAA;MAAA;QAAA;MAAA;MACA;QACAG;MACA;QACAA;MACA;QACAA;MACA;QACAA;MACA;MACAH;MACA;IACA;IACA;IACAI;MACA;MACA;MACA;MACA;IACA;IACAC;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACtXA;AAAA;AAAA;AAAA;AAA47B,CAAgB,s7BAAG,EAAC,C;;;;;;;;;;;ACAh9B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/game_local/game_local.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/game_local/game_local.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./game_local.vue?vue&type=template&id=495bb886&\"\nvar renderjs\nimport script from \"./game_local.vue?vue&type=script&lang=js&\"\nexport * from \"./game_local.vue?vue&type=script&lang=js&\"\nimport style0 from \"./game_local.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\programs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/game_local/game_local.vue\"\nexport default component.exports","export * from \"-!D:\\\\programs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\programs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\programs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\programs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\programs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\programs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./game_local.vue?vue&type=template&id=495bb886&\"","var components\ntry {\n  components = {\n    dice: function () {\n      return import(\n        /* webpackChunkName: \"components/dice/dice\" */ \"@/components/dice/dice.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\programs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\programs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\programs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\programs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\programs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./game_local.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\programs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\programs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\programs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\programs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\programs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./game_local.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"container\">\r\n\t\t<view class=\"title\">本地双人对战</view>\r\n\t\t<view class=\"game-board\">\r\n\t\t\t<view class=\"player-dices left\">\r\n\t\t\t\t<dice v-for=\"n in numList\" :key=\"n\" :value=\"player1DiceValues[n-1]\"\r\n\t\t\t\t\t:locked=\"player1LockedDices[n-1]\"\r\n\t\t\t\t\t@locked=\"updateLockStatus(1, n, $event)\"\r\n\t\t\t\t\t@diceRolled=\"updateDiceValue(1, n, $event)\"></dice>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"player-dices right\">\r\n\t\t\t\t<dice v-for=\"n in numList\" :key=\"n\" :value=\"player2DiceValues[n-1]\"\r\n\t\t\t\t\t:locked=\"player2LockedDices[n-1]\"\r\n\t\t\t\t\t@locked=\"updateLockStatus(2, n, $event)\"\r\n\t\t\t\t\t@diceRolled=\"updateDiceValue(2, n, $event)\"></dice>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"game-info\">\r\n\t\t\t<text>局数: {{ currentBureauNum }}/{{bureauNum}}</text>\r\n\t\t\t<text>当前轮数: {{ currentRound }}</text>\r\n\t\t\t<text>玩家1得分: {{ player1Score }}</text>\r\n\t\t\t<text>玩家2得分: {{ player2Score }}</text>\r\n\t\t</view>\r\n\t\t<button v-if=\"!showMultiplierDialog && currentPlayer === 1\" class=\"btn\"\r\n\t\t\t@click=\"rollDices\">玩家1投掷骰子</button>\r\n\t\t<button v-if=\"!showMultiplierDialog && currentPlayer === 2\" class=\"btn\"\r\n\t\t\t@click=\"rollDices\">玩家2投掷骰子</button>\r\n\t\t<button v-if=\"currentPlayer === 1 && !showMultiplierDialog\" class=\"btn\"\r\n\t\t\t@click=\"confirmLock\">玩家1完成锁定</button>\r\n\t\t<button v-if=\"currentPlayer === 2 && !showMultiplierDialog\" class=\"btn\"\r\n\t\t\t@click=\"confirmLock\">玩家2完成锁定</button>\r\n\t\t<button v-if=\"showMultiplierDialog \" @click=\"setMultiplier(0)\" class=\"btn\">倍率\r\n\t\t\t0</button>\r\n\t\t<button v-if=\"showMultiplierDialog \" @click=\"setMultiplier(1)\" class=\"btn\">倍率\r\n\t\t\t1</button>\r\n\t\t<button v-if=\"showMultiplierDialog \" @click=\"setMultiplier(2)\" class=\"btn\">倍率\r\n\t\t\t2</button>\r\n\t\t<button v-if=\"showMultiplierDialog \" @click=\"setMultiplier(3)\" class=\"btn\">倍率\r\n\t\t\t3</button>\r\n\t\t<!-- <button v-if=\"showMultiplierDialog && currentPlayer === 1\" @click=\"setMultiplier(0)\" class=\"btn\">倍率 0</button>\r\n    <button v-if=\"showMultiplierDialog && currentPlayer === 1\" @click=\"setMultiplier(1)\" class=\"btn\">倍率 1</button>\r\n    <button v-if=\"showMultiplierDialog && currentPlayer === 1\" @click=\"setMultiplier(2)\" class=\"btn\">倍率 2</button>\r\n    <button v-if=\"showMultiplierDialog && currentPlayer === 1\" @click=\"setMultiplier(3)\" class=\"btn\">倍率 3</button>\r\n    <button v-if=\"showMultiplierDialog && currentPlayer === 2\" @click=\"setMultiplier(0)\" class=\"btn\">倍率 0</button>\r\n    <button v-if=\"showMultiplierDialog && currentPlayer === 2\" @click=\"setMultiplier(1)\" class=\"btn\">倍率 1</button>\r\n    <button v-if=\"showMultiplierDialog && currentPlayer === 2\" @click=\"setMultiplier(2)\" class=\"btn\">倍率 2</button>\r\n    <button v-if=\"showMultiplierDialog && currentPlayer === 2\" @click=\"setMultiplier(3)\" class=\"btn\">倍率 3</button> -->\r\n\t\t<button class=\"btn\" @click=\"navigateBack\">重新开始新的一局</button>\r\n\t</view>\r\n</template>\r\n\r\n\r\n<script>\r\n\timport Dice from '@/components/dice/dice.vue';\r\n\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tDice\r\n\t\t},\r\n\t\tonLoad(option) {\r\n\t\t\tif (option.bureauNum) {\r\n\t\t\t\tthis.bureauNum = +option.bureauNum\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tnumList: [1, 2, 3, 4, 5],\r\n\t\t\t\tcurrentRound: 1,\r\n\t\t\t\tcurrentPlayer: 1,\r\n\t\t\t\tplayer1Score: 1000,\r\n\t\t\t\tplayer2Score: 1000,\r\n\t\t\t\tplayer1DiceValues: [1, 1, 1, 1, 1],\r\n\t\t\t\tplayer2DiceValues: [1, 1, 1, 1, 1],\r\n\t\t\t\tplayer1LockedDices: [false, false, false, false, false],\r\n\t\t\t\tplayer2LockedDices: [false, false, false, false, false],\r\n\t\t\t\tshowMultiplierDialog: false,\r\n\t\t\t\tplayer1Multiplier: 1,\r\n\t\t\t\ttotalMultiplier: 1,\r\n\t\t\t\tplayer2Multiplier: 1,\r\n\t\t\t\tcurrentBureauNum: 1,\r\n\t\t\t\tbureauNum: 1,\r\n\t\t\t\tisFlag:false,\r\n\t\t\t\tplayer1Multiplying:[], // 倍率数组\r\n\t\t\t};\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\trollDices() {\r\n\t\t\t\tif (this.currentPlayer === 1) {\r\n\t\t\t\t\tif(this.isFlag) return \r\n\t\t\t\t\tthis.isFlag = true\r\n\t\t\t\t\tthis.player1DiceValues = this.player1DiceValues.map((value, index) => {\r\n\t\t\t\t\t\treturn this.player1LockedDices[index] ? value : Math.floor(Math.random() *\r\n\t\t\t\t\t\t\t6) + 1;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif(this.currentRound == 3) {\r\n\t\t\t\t\t\tthis.currentPlayer = 2;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.player2DiceValues = this.player2DiceValues.map((value, index) => {\r\n\t\t\t\t\t\treturn this.player2LockedDices[index] ? value : Math.floor(Math.random() *\r\n\t\t\t\t\t\t\t6) + 1;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (this.currentRound == 3) {\r\n\t\t\t\t\t\tthis.isFlag = false\r\n\t\t\t\t\t\tthis.currentPlayer = 1;\r\n\t\t\t\t\t\tthis.setMultiplierForComputer();\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tconfirmLock() {\r\n\t\t\t\tif(this.currentRound == 3 || this.isFlag == false) return \r\n\t\t\t\tthis.showMultiplierDialog =true;\r\n\t\t\t\t // <-- Added this to show the multiplier dialog for player 1\r\n\t\t\t},\r\n\r\n\t\t\tsetMultiplier(value) {\r\n\t\t\t\t\r\n\t\t\t\tif(this.currentRound < 3) {\r\n\t\t\t\t\tif(value === 0 && this.player1Multiplying.length) {\r\n\t\t\t\t\t\t// 多个倍率0 只加1 [0,0]  倍率和为1\r\n\t\t\t\t\t\tif(!this.player1Multiplying.includes(value)){\r\n\t\t\t\t\t\t\tthis.player1Multiplying.push(value)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else this.player1Multiplying.push(value)\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (this.currentPlayer === 1) {\r\n\t\t\t\t\tthis.currentPlayer = 2;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.currentPlayer = 1;\r\n\t\t\t\t\tthis.isFlag = false\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.currentRound ++\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.showMultiplierDialog = false;\r\n\t\t\t\t\r\n\t\t\t\t// if (this.currentPlayer === 1) {\r\n\t\t\t\t// \tthis.player1Multiplier = value;\r\n\t\t\t\t// \tthis.player1Score += this.calculateScore(this.player1DiceValues) * this\r\n\t\t\t\t// \t\t.player1Multiplier; // <-- Adjusted score based on multiplier\r\n\t\t\t\t// \tthis.currentPlayer = 2;\r\n\t\t\t\t// \tthis.showMultiplierDialog = false;\r\n\t\t\t\t// } else {\r\n\t\t\t\t// \tthis.player2Multiplier = value;\r\n\t\t\t\t// \tthis.player2Score += this.calculateScore(this.player2DiceValues) * this\r\n\t\t\t\t// \t\t.player2Multiplier; // <-- Adjusted score based on multiplier\r\n\t\t\t\t// \tif (this.currentRound < 3) {\r\n\t\t\t\t// \t\tthis.currentRound++;\r\n\t\t\t\t// \t\tthis.showMultiplierDialog = false;\r\n\t\t\t\t// \t\tthis.currentPlayer = 1;\r\n\t\t\t\t// \t} else {\r\n\t\t\t\t// \t\tthis.finalizeScores();\r\n\t\t\t\t// \t}\r\n\t\t\t\t// }\r\n\t\t\t},\r\n\t\t\tcalculateScore(diceValues) {\r\n\t\t\t\tconst counts = Array(6).fill(0);\r\n\t\t\t\tdiceValues.forEach(val => counts[val - 1]++);\r\n\r\n\t\t\t\tconst hasPair = counts.some(count => count === 2);\r\n\t\t\t\tconst hasThreeOfAKind = counts.some(count => count === 3);\r\n\t\t\t\tconst hasFourOfAKind = counts.some(count => count === 4);\r\n\t\t\t\tconst hasFiveOfAKind = counts.some(count => count === 5);\r\n\r\n\t\t\t\tconst isSmallStraight = [0, 1, 2, 3, 5].every((val, index) => counts[val] === 1);\r\n\t\t\t\tconst isLargeStraight1 = [0, 1, 2, 3, 4].every((val, index) => counts[val] === 1);\r\n\t\t\t\tconst isLargeStraight2 = [1, 2, 3, 4, 5].every((val, index) => counts[val] === 1);\r\n\r\n\t\t\t\tlet bonusScore = 0;\r\n\r\n\t\t\t\tif (hasPair) bonusScore += 10;\r\n\t\t\t\tif (hasThreeOfAKind) bonusScore += 10;\r\n\t\t\t\tif (hasThreeOfAKind && hasPair) bonusScore += 20;\r\n\t\t\t\tif (hasFourOfAKind) bonusScore += 40;\r\n\t\t\t\tif (hasFiveOfAKind) bonusScore += 100;\r\n\t\t\t\tif (isSmallStraight) bonusScore += 30;\r\n\t\t\t\tif (isLargeStraight1 || isLargeStraight2) bonusScore += 60;\r\n\r\n\t\t\t\treturn bonusScore;\r\n\t\t\t},\r\n\r\n\t\t\tfinalizeScores() {\r\n\t\t\t\tconst difference = Math.abs(this.player1Score - this.player2Score);\r\n\r\n\t\t\t\tif (this.player1Score > this.player2Score) {\r\n\t\t\t\t\tthis.player1Score += difference;\r\n\t\t\t\t\tthis.player2Score -= difference;\r\n\t\t\t\t} else if (this.player2Score > this.player1Score) {\r\n\t\t\t\t\tthis.player2Score += difference;\r\n\t\t\t\t\tthis.player1Score -= difference;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tupdateLockStatus(player, index, status) {\r\n\t\t\t\tif (player === 1) {\r\n\t\t\t\t\tthis.$set(this.player1LockedDices, index - 1, status);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$set(this.player2LockedDices, index - 1, status);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tupdateDiceValue(player, index, newValue) {\r\n\t\t\t\tif (player === 1) {\r\n\t\t\t\t\tthis.$set(this.player1DiceValues, index - 1, newValue);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$set(this.player2DiceValues, index - 1, newValue);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tnavigateBack() {\r\n\t\t\t\tuni.navigateBack();\r\n\t\t\t},\r\n\t\t\t// 判断轮次是否结束  结束后先计算分数后判断局数是否为最后一局\r\n\t\t\tsetMultiplierForComputer() {\r\n\t\t\t\t\tlet player1 = this.judgeType(this.player1DiceValues)\r\n\t\t\t\t\tlet player2 = this.judgeType(this.player2DiceValues)\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle: `第${this.currentBureauNum}局分数计算中，请稍后`\r\n\t\t\t\t\t})\r\n\t\t\t\t\tsetTimeout(() =>{\r\n\t\t\t\t\t\tthis.getDiceTypeAndScore(player1, player2)\r\n\t\t\t\t\t},2000)\r\n\t\t\t\t\treturn\r\n\t\t\t\t// this.player2Multiplier = value;\r\n\t\t\t\t// const score = this.calculateScore(this.player2DiceValues);\r\n\t\t\t\t// this.player2Score += score * this.player2Multiplier;\r\n\t\t\t\tthis.showMultiplierDialog = false;\r\n\t\t\t\tthis.currentPlayer = 1;\r\n\t\t\t\t// this.currentRound++;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 获取骰子类型以及骰子点数 最后进行结算 1 玩家  2 玩家\r\n\t\t\tgetDiceTypeAndScore(dice1Values, dice2Values) {\r\n\t\t\t\tconsole.log(dice1Values, dice2Values, 'dice1Values,dice2Values');\r\n\t\t\t\tlet differenceNum = dice1Values.score - dice2Values.score\r\n\t\t\t\tlet multiplying = this.player1Multiplying.reduce((acc,cur) => {\r\n\t\t\t\t\tif(cur === 0) {\r\n\t\t\t\t\t\tacc++\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tacc += cur\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn acc\r\n\t\t\t\t},0)\r\n\t\t\t\tif (differenceNum > 0) {\r\n\t\t\t\t\tthis.player1Score = this.player1Score + differenceNum * multiplying\r\n\t\t\t\t\tthis.player2Score = this.player2Score - differenceNum * multiplying\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.player1Score = this.player1Score + differenceNum * multiplying\r\n\t\t\t\t\tthis.player2Score = this.player2Score - differenceNum * multiplying\r\n\t\t\t\t}\r\n\t\t\t\t// this.resetDice()\r\n\t\t\t\r\n\t\t\t\tif (this.currentBureauNum == this.bureauNum) {\r\n\t\t\t\t\tsetTimeout(() =>{\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '对局已结束！',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthis.hideButton()\r\n\t\t\t\t\t},1000)\r\n\t\t\t\t\treturn\r\n\t\t\t\t} \r\n\t\t\t\tif(this.player1Score <= 0 || this.player2Score <= 0) {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '玩家分数不足对局结束！',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration:3000\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.hideButton()\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.currentBureauNum++\r\n\t\t\t\tthis.currentRound = 1\r\n\t\t\t\tthis.showMultiplierDialog = false;\r\n\t\t\t\tthis.currentPlayer = 1;\r\n\t\t\t\tuni.hideLoading()\r\n\t\t\t\tthis.resetDice()\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 判断骰子类型 1双对 2三连 3葫芦 4四连 5五连 6小顺 7大顺\r\n\t\t\tjudgeType(current) {\r\n\t\t\t\tconst sortedDices = current.sort();\r\n\t\t\t\tconst uniqueDices = [...new Set(sortedDices)];\r\n\t\t\t\tlet duplicatedElements = {}\r\n\t\t\t\tswitch (uniqueDices.length) {\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\t// 五连\r\n\t\t\t\t\t\tduplicatedElements[uniqueDices[0]] = 5\r\n\t\t\t\t\t\tduplicatedElements.type = 5\r\n\t\t\t\t\t\tduplicatedElements.score = uniqueDices[0] * 5 + 100\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\tduplicatedElements = this.setForEach(uniqueDices, current, uniqueDices.length)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\tduplicatedElements = this.setForEach(uniqueDices, current, uniqueDices.length)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\tduplicatedElements.type = 0\r\n\t\t\t\t\t\tduplicatedElements.score = current.reduce((acc, cur) => acc + cur, 0)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 5:\r\n\t\t\t\t\t\t// 大顺子\r\n\t\t\t\t\t\tif (uniqueDices[uniqueDices.length - 1] - uniqueDices[0] == 4) {\r\n\t\t\t\t\t\t\tduplicatedElements.type = 7\r\n\t\t\t\t\t\t\tduplicatedElements.score = current.reduce((acc, cur) => acc + cur, 0) +\r\n\t\t\t\t\t\t\t\t60\r\n\t\t\t\t\t\t} else if (uniqueDices[uniqueDices.length - 2] - uniqueDices[0] == 3) {\r\n\t\t\t\t\t\t\t// 小顺子\r\n\t\t\t\t\t\t\tduplicatedElements.type = 6\r\n\t\t\t\t\t\t\tduplicatedElements.score = current.reduce((acc, cur) => acc + cur, 0) +\r\n\t\t\t\t\t\t\t\t30\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tduplicatedElements.type = 0\r\n\t\t\t\t\t\t\tduplicatedElements.score = current.reduce((acc, cur) => acc + cur, 0) \r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\treturn duplicatedElements\r\n\t\t\t\r\n\t\t\t},\r\n\t\t\t// 骰子类型出现两对 三连 length 3   四连 葫芦 length 2\r\n\t\t\tsetForEach(setArr, current, length) {\r\n\t\t\t\tlet duplicatedElements = {}\r\n\t\t\t\tlet score = 0\r\n\t\t\t\tfor (const ele of setArr) {\r\n\t\t\t\t\tlet repetLength = current.filter(item => ele == item).length\r\n\t\t\t\t\tif (repetLength > 1) {\r\n\t\t\t\t\t\tscore += ele * repetLength\r\n\t\t\t\t\t} else score += ele\r\n\t\t\t\r\n\t\t\t\t\t// 判断类型  2 包括 葫芦和四连  3包括 三连和两对\r\n\t\t\t\t\tif (length == 2) {\r\n\t\t\t\t\t\tif (repetLength == 2) {\r\n\t\t\t\t\t\t\tduplicatedElements.type = 3\r\n\t\t\t\t\t\t} else if (repetLength == 4) {\r\n\t\t\t\t\t\t\tduplicatedElements.type = 4\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (length == 3) {\r\n\t\t\t\t\t\tif (repetLength == 3) {\r\n\t\t\t\t\t\t\tduplicatedElements.type = 2\r\n\t\t\t\t\t\t} else if (repetLength == 2) {\r\n\t\t\t\t\t\t\tduplicatedElements.type = 1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (duplicatedElements.type == 1) {\r\n\t\t\t\t\tscore += 10\r\n\t\t\t\t} else if (duplicatedElements.type == 2) {\r\n\t\t\t\t\tscore += 10\r\n\t\t\t\t} else if (duplicatedElements.type == 3) {\r\n\t\t\t\t\tscore += 20\r\n\t\t\t\t} else if (duplicatedElements.type == 4) {\r\n\t\t\t\t\tscore += 40\r\n\t\t\t\t}\r\n\t\t\t\tduplicatedElements.score = score\r\n\t\t\t\treturn duplicatedElements\r\n\t\t\t},\r\n\t\t\t// 重置骰子\r\n\t\t\tresetDice() {\r\n\t\t\t\tthis.player1DiceValues = [1, 1, 1, 1, 1]\r\n\t\t\t\tthis.player2DiceValues = [1, 1, 1, 1, 1]\r\n\t\t\t\tthis.player1LockedDices = [false,false,false,false,false,]\r\n\t\t\t\tthis.player2LockedDices = [false,false,false,false,false,]\r\n\t\t\t},\r\n\t\t\thideButton() {\r\n\t\t\t\tthis.currentPlayer = false\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n\r\n\r\n\r\n<style>\r\n\t.container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tpadding: 20px;\r\n\t\tbackground-color: #f0f0f0;\r\n\t}\r\n\r\n\t.title {\r\n\t\tfont-size: 24px;\r\n\t\tmargin-bottom: 20px;\r\n\t}\r\n\r\n\t.game-board {\r\n\t\twidth: 100%;\r\n\t\theight: 300px;\r\n\t\tbackground-color: #fff;\r\n\t\tmargin-bottom: 20px;\r\n\t}\r\n\r\n\t.game-info {\r\n\t\tmargin-bottom: 20px;\r\n\t}\r\n\r\n\t.btn {\r\n\t\tmargin: 10px;\r\n\t\tpadding: 10px 20px;\r\n\t\tbackground-color: #4CAF50;\r\n\t\tcolor: white;\r\n\t\tborder: none;\r\n\t\tborder-radius: 5px;\r\n\t}\r\n\r\n\t.game-board {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\r\n\t.player-dices.left {\r\n\t\tmargin-right: 10px;\r\n\t}\r\n\r\n\t.player-dices.right {\r\n\t\tmargin-left: 10px;\r\n\t}\r\n</style>","import mod from \"-!D:\\\\programs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\programs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\programs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\programs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\programs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\programs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\programs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./game_local.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\programs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\programs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\programs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\programs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\programs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\programs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\programs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./game_local.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1697078196696\n      var cssReload = require(\"D:/programs/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}